<html>
    <head>
         <title>OrderPage</title>

         <meta charset="utf-8">
         <meta name="viewport" content="width=device-width, initial-scale=1">
         <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
         <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
         <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
         <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>      
         <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
         <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
         <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
         <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    </head>

    <body>
        <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
           
         
            <div class="collapse navbar-collapse" id="collapsibleNavbar">
              <ul class="navbar-nav">
                <li class="nav-item">
                  <a class="nav-link" href="http://localhost:3000/neworder">Feed</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="http://localhost:3000">Home</a>
                </li>   
              </ul>
            </div>  
          </nav>
          &nbsp;
          &nbsp;
          &nbsp;
          &nbsp;
          <div class="container">
            <h2>List of Orders</h2>
            <p>The table shows the fed in orders:</p>            
            <table class="table table-dark table-hover">
              <thead>
                  
                <tr>
                  <th>Customer Name</th>
                  <th>Book Name</th>
                  <th>Publication Date</th>
                  <th>Expiry date</th>
                </tr>
              </thead>
              <tbody id="tbody">
          <!--      <tr>
                  <td>John</td> 
                </tr> -->
              </tbody>
            </div>
            </table>


            <script>
               fetch("http://localhost:7777/orders").then(resp => resp.json())
     .then(results=>{
         results.forEach(element=>{
            fetch(`http://localhost:7777/orders/${element._id}`).then(resp => resp.json())
            .then(re=>{

                let inidate = re.IniDate.substring(0, 10);
                let deldate = re.DelDate.substring(0, 10);

                const htmlelementparent = document.getElementById('tbody');
                const li = document.createElement("tr");
                const html = `
                <td>${re.Customername}</td>
                <td>${re.Bookname}</td>
                <td>${inidate}</td>
                <td>${deldate}</td>
               `
               li.innerHTML = html;
               htmlelementparent.insertAdjacentElement('afterbegin', li)



            })


         })
     })

            </script>
    </body>
</html>