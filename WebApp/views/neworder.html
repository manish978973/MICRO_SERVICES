<html>
    <head>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>      
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>

        <style>
            
            .container1{
              
                margin-top:50px;
                
            }

        </style>

    </head>
    <body>

        <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
           
         
            <div class="collapse navbar-collapse" id="collapsibleNavbar">
              <ul class="navbar-nav">
                <li class="nav-item">
                  <a class="nav-link" href="http://localhost:3000/orders">List Orders</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="http://localhost:3000">Home</a>
                </li>   
              </ul>
            </div>  
          </nav>

        <div class="container" >
            <div class="container1">

            <h2>Create a Order</h2>
            <p>Make sure you have appropriate book and customer id to create a valid order</p>
              

        <form class="was-validated" id="myform" onsubmit="postData()">
            <div class="form-group">
              <label for="uname">Customer ID:</label>
              <input type="text" class="form-control" id="customerid" placeholder="Enter Customer ID" name="customerid" required>
              <div class="valid-feedback">Valid.</div>
              <div class="invalid-feedback">Please fill out this field.</div>
            </div>
            <div class="form-group">
                <label for="uname">Book ID:</label>
                <input type="text" class="form-control" id="bookid" placeholder="Enter Book ID" name="bookid" required>
                <div class="valid-feedback">Valid.</div>
                <div class="invalid-feedback">Please fill out this field.</div>
              </div>

              <div class="form-group">
                <label for="uname">Date of Publication:</label>
                <input type="date" class="form-control" id="inidate" placeholder="Enter publication date" name="inidate" required>
                <div class="valid-feedback">Valid.</div>
                <div class="invalid-feedback">Please fill out this field.</div>
              </div>

              <div class="form-group">
                <label for="uname">Date of Expiry:</label>
                <input type="date" class="form-control" id="deldate" placeholder="Enter expiry date" name="deldate" required>
                <div class="valid-feedback">Valid.</div>
                <div class="invalid-feedback">Please fill out this field.</div>
              </div>
          
            <div class="form-group form-check">
              <label class="form-check-label">
                <input class="form-check-input" type="checkbox" name="remember" required> I agree on all terms.
                <div class="valid-feedback">Valid.</div>
                <div class="invalid-feedback">Check this checkbox to continue.</div>
              </label>
            </div>
           <!--  <button type="button" class="btn btn-primary" id="submit" onclick="postData()">Submit</button> -->
           <input type="submit" value="Submit" >
          
          </form>
        </div>

        </div>

        <script>
        function postData() {
          const form = document.getElementById('myform');
            const customerid = form.customerid.value;
            const bookid= form.bookid.value;
            const inidate = form.inidate.value;
            const deldate = form.deldate.value;


             fetch('http://localhost:7777/order', {headers: {'Accept': 'application/json',
                 'Content-Type': 'application/json'},method: 'POST',mode: 'cors', body: JSON.stringify({customerid:customerid,bookid:bookid,inidate:inidate,deldate:deldate})}).then(response => {
                if (response.ok){
                  window.location.href = "http://localhost:3000/orders";
                 //throw new Error('Network response was not ok.');
                }
             }).catch((err) => {
                	console.log(err);
             });

            
        }
     
        </script>

    </body>
</html>


